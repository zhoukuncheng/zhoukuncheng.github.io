<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>Concurrency on zhoukuncheng's Personal Blog</title><link>https://zhoukuncheng.github.io/tags/concurrency/</link><description>Recent content in Concurrency on zhoukuncheng's Personal Blog</description><generator>Hugo -- 0.153.3</generator><language>en</language><lastBuildDate>Mon, 01 Aug 2022 23:54:05 +0800</lastBuildDate><atom:link href="https://zhoukuncheng.github.io/tags/concurrency/index.xml" rel="self" type="application/rss+xml"/><item><title>Structured Concurrency</title><link>https://zhoukuncheng.github.io/posts/structured-concurrency/</link><pubDate>Mon, 01 Aug 2022 23:54:05 +0800</pubDate><guid>https://zhoukuncheng.github.io/posts/structured-concurrency/</guid><description>&lt;h1 id="introduction"&gt;Introduction&lt;/h1&gt;
&lt;h2 id="definition"&gt;Definition&lt;/h2&gt;
&lt;p&gt;According to Wikipedia:&lt;br&gt;
&lt;strong&gt;Structured concurrency&lt;/strong&gt; is a &lt;a href="https://en.wikipedia.org/wiki/Programming_paradigm" title="Programming paradigm"&gt;programming paradigm&lt;/a&gt; aimed at improving the &lt;strong&gt;clarity, quality, and development time&lt;/strong&gt; of a &lt;a href="https://en.wikipedia.org/wiki/Computer_program" title="Computer program"&gt;computer program&lt;/a&gt; by using a structured approach to &lt;a href="https://en.wikipedia.org/wiki/Concurrent_computing" title="Concurrent computing"&gt;concurrent programming&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The core concept is the &lt;strong&gt;encapsulation of concurrent threads of execution&lt;/strong&gt; (here encompassing kernel and userland threads and processes) by way of control flow constructs that have &lt;strong&gt;clear entry and exit points&lt;/strong&gt; and that ensure &lt;strong&gt;all spawned threads have completed before exit&lt;/strong&gt;. Such encapsulation allows &lt;strong&gt;errors in concurrent threads to be propagated to the control structure&amp;rsquo;s parent scope&lt;/strong&gt; and managed by the native error handling mechanisms of each particular computer language. It allows control flow to remain readily evident by the structure of the source code despite the presence of concurrency. To be effective, this model &lt;strong&gt;must be applied consistently throughout all levels of the program&lt;/strong&gt; â€“ otherwise &lt;strong&gt;concurrent threads may leak out&lt;/strong&gt;, become orphaned, or fail to have runtime errors correctly propagated.&lt;/p&gt;</description></item><item><title>Concurrency Pattern Differences between Python and Go</title><link>https://zhoukuncheng.github.io/posts/concurrency-model-differences-between-python-go/</link><pubDate>Mon, 30 Aug 2021 23:54:05 +0800</pubDate><guid>https://zhoukuncheng.github.io/posts/concurrency-model-differences-between-python-go/</guid><description>&lt;h2 id="concurrency-in-python"&gt;Concurrency in Python&lt;/h2&gt;
&lt;p&gt;In Python, early concurrency methods were dominated by traditional multi-processing and multi-threading, similar to Java. At the same time, there were many third-party asynchronous solutions (gevent/tornado/twisted, etc.).&lt;br&gt;
In the Python 3 era, the official &lt;code&gt;asyncio&lt;/code&gt; library and &lt;code&gt;async/await&lt;/code&gt; syntax were introduced as Python&amp;rsquo;s official coroutine implementation, which gradually became popular.&lt;/p&gt;
&lt;h3 id="processes"&gt;Processes&lt;/h3&gt;
&lt;p&gt;Example of multi-processing programming:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;multiprocessing&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Process&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;hello&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="vm"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;target&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bob&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The API of &lt;code&gt;multiprocessing&lt;/code&gt; is close to &lt;code&gt;threading&lt;/code&gt;, making it relatively easy to create multi-process programs. It is a solution recommended by Python officially to bypass the GIL restriction of multi-threading.&lt;br&gt;
However, it should be noted that the parameters for creating a process need to be pickle-serializable. It is best to use process-safe data structures like Pipe and Queue (&lt;a href="https://docs.python.org/3/library/multiprocessing.html#programming-guidelines"&gt;Official Programming guidelines&lt;/a&gt;).&lt;/p&gt;</description></item></channel></rss>