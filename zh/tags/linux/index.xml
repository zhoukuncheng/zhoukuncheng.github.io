<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>Linux on zhoukuncheng's Personal Blog</title><link>https://zhoukuncheng.github.io/zh/tags/linux/</link><description>Recent content in Linux on zhoukuncheng's Personal Blog</description><generator>Hugo -- 0.153.3</generator><language>zh-CN</language><lastBuildDate>Fri, 24 Jul 2020 01:11:34 +0800</lastBuildDate><atom:link href="https://zhoukuncheng.github.io/zh/tags/linux/index.xml" rel="self" type="application/rss+xml"/><item><title>编译 CPython 心得</title><link>https://zhoukuncheng.github.io/zh/posts/python-build/</link><pubDate>Fri, 24 Jul 2020 01:11:34 +0800</pubDate><guid>https://zhoukuncheng.github.io/zh/posts/python-build/</guid><description>&lt;h2 id="什么情况下需要自己编译-cpython"&gt;什么情况下需要自己编译 CPython&lt;/h2&gt;
&lt;p&gt;大多数操作系统都提供了编译好的 CPython 版本，一般直接通过包管理器安装就能满足需求，但是某些情况下，就需要自己编译 CPython 来满足特定需求了：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;操作系统提供的 Python 版本太低，并且 Python 官网、系统包管理源没有提供预编译的新版本 Python&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;预编译版本不符合性能、扩展等方面的要求，比如没有开启编译器优化、OpenSSL/SQLite 版本不满足要求等&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;参与 CPython 开发或者尝鲜，尝试 Alpha/Beta/RC 等版本的 Python&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;​ &lt;br&gt;
​&lt;/p&gt;
&lt;h2 id="低版本-linux-发行版上编译-cpython-时的注意事项"&gt;低版本 Linux 发行版上编译 CPython 时的注意事项&lt;/h2&gt;
&lt;h3 id="openssl"&gt;OpenSSL&lt;/h3&gt;
&lt;p&gt;因为 CentOS 6 官方源中的 OpenSSL 版本过低，不满足 Python 3.7 及之后的要求，所以直接 configure &amp;amp; make 会报错，解决办法：&lt;/p&gt;
&lt;p&gt;参考 &lt;a href="https://benad.me/blog/2018/07/17/python-3.7-on-centos-6/"&gt;Python 3.7 on CentOS 6&lt;/a&gt; , 提前编译 OpenSSL, 编译 CPython 时修改 Modules/Setup 文件，并且指定环境变量 &lt;code&gt;LDFLAGS=&amp;quot;-Wl,-rpath=/usr/local/openssl11/lib&amp;quot;&lt;/code&gt; , 指定参数 &lt;code&gt;-with-openssl=/usr/local/openssl11&lt;/code&gt; 。&lt;/p&gt;
&lt;h3 id="sqlite"&gt;SQLite&lt;/h3&gt;
&lt;p&gt;Jupyter 等软件依赖 SQLite, 所以编译 CPython 时不仅要注意 SQLite 版本，也要开启 &lt;code&gt;--enable-loadable-sqlite-extensions&lt;/code&gt; , 参考：&lt;a href="https://stackoverflow.com/questions/57977481/how-to-use-enable-load-extension-from-sqlite3"&gt;How to use enable_load_extension from sqlite3?&lt;/a&gt;&lt;/p&gt;</description></item></channel></rss>