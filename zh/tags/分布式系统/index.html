<!doctype html><html lang=zh dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>分布式系统 | zhoukuncheng's Personal Blog</title><meta name=keywords content><meta name=description content="zhoukuncheng's Personal Blog"><meta name=author content="zhoukuncheng"><link rel=canonical href=https://zhoukuncheng.github.io/zh/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/><link crossorigin=anonymous href=/assets/css/stylesheet.343cc480b9ffc8f04ccbe5e968ad674880cab773ec19905e93033065c1e7a804.css integrity="sha256-NDzEgLn/yPBMy+XpaK1nSIDKt3PsGZBekwMwZcHnqAQ=" rel="preload stylesheet" as=style><link rel=icon href=https://zhoukuncheng.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://zhoukuncheng.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://zhoukuncheng.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://zhoukuncheng.github.io/apple-touch-icon.png><link rel=mask-icon href=https://zhoukuncheng.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://zhoukuncheng.github.io/zh/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/index.xml title=rss><link rel=alternate hreflang=zh href=https://zhoukuncheng.github.io/zh/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-GH88YSLNJN"></script><script>var doNotTrack=!1,dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-GH88YSLNJN")}</script><meta property="og:url" content="https://zhoukuncheng.github.io/zh/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/"><meta property="og:site_name" content="zhoukuncheng's Personal Blog"><meta property="og:title" content="分布式系统"><meta property="og:description" content="zhoukuncheng's Personal Blog"><meta property="og:locale" content="zh-CN"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="分布式系统"><meta name=twitter:description content="zhoukuncheng's Personal Blog"></head><body class=list id=top><header class=header><nav class=nav><div class=logo><a href=https://zhoukuncheng.github.io/zh/ accesskey=h title="zhoukuncheng's Personal Blog (Alt + H)">zhoukuncheng's Personal Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://zhoukuncheng.github.io/ title=English aria-label=English>En</a></li></ul></div></div><ul id=menu><li><a href=https://zhoukuncheng.github.io/zh/ title=首页><span>首页</span></a></li><li><a href=https://zhoukuncheng.github.io/zh/posts/ title=归档><span>归档</span></a></li><li><a href=https://zhoukuncheng.github.io/zh/tags/ title=标签><span>标签</span></a></li><li><a href=https://zhoukuncheng.github.io/zh/categories/ title=分类><span>分类</span></a></li><li><a href=https://zhoukuncheng.github.io/zh/about/ title=关于><span>关于</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>分布式系统</h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Distributed Systems for Fun and Profit 笔记（二）</h2></header><div class=entry-content><p>2. 抽象的上下不同层次 系统模型 分布式系统中的程序：
在独立节点上同时运行
通过可能引入不确定性和消息丢失的网络连接
并且没有共享内存或共享时钟
系统模型列举了与特定系统设计相关的许多假设，实现分布式系统的环境和设施的假设：
节点具有什么功能以及它们如何失败 通信连接如何运行以及它们如何可能失败 整个系统的属性，例如关于时间和顺序的假设 健壮的系统模型做出最弱假设，强有力的假设创建易于推理的系统模型
此模型中的节点 作为计算和存储的主机：
执行程序的能力 能够将数据存储到内存和稳定持久状态的能力 时钟 节点执行确定性算法
故障模型：崩溃恢复而非拜占庭容错（任意错误）
此模型中的通信连接 通信连接将各个节点相互连接，并任一方向发送消息
网络不可靠，消息易延迟丢失
网络分区：网络断开但节点存活
时间和顺序的假设 信息最多以光速传播
如果距离不同，节点间消息的到达时间、顺序可能不同
同步系统模型 进程以锁定步骤执行；消息传输延迟有已知上限；每个进程都有准确的时钟
异步系统模型 没有时间假设，进程以独立的速率执行；消息传输延迟没有限制；有用的时钟不存在
共识问题 多个节点都同意一些值时达成共识
一致：每个正确节点都同意相同的值
完整：每个正确的进程最多只能决定一个值，如果决定某个值，那么一定是某些进程提议的
终止：所有进程最终达成决定
有效：如果所有正确进程提议相同的值 V，那么所有正确进程决定值 V
两种不可能的结果 FLP 不可能 假定节点只能因崩溃而失效；网络可靠，并且异步系统模型的典型时序假设成立：例如，消息延迟没有限制，
在网络可靠，但允许节点失效（即便只有一个）的最小化异步模型系统中，不存在一个可以解决一致性问题的确定性共识算法
CAP 定理 三个属性：
（强）一致性：所有节点同时看到相同的数据
可用性：节点故障不会阻止幸存者继续运行
分区容错：网络或节点故障导致消息丢失时，系统仍可继续运行
同时具备这三种属性的系统无法实现：
三种不同的系统类型：
CA（一致性+可用性）：完全严格的仲裁协议，例如两阶段提交 CP（一致性+分区容错）：多数仲裁协议，其中少数分区不可用，例如Paxos AP（可用性+分区容错）：使用冲突解决方案的协议，例如Dynamo 一致性模型：程序员与系统之间的合同，其中系统保证，如果程序员遵循某些特定规则，则对数据存储区的操作结果将是可预测的
强一致性模型（能够维护单个副本） Linearizable consistency （可线性化一致性） Sequential consistency （顺序一致性） 弱一致性 Client-centric consistency models （客户端为中心一致性） Causal consistency: strongest model available （因果一致性） Eventual consistency models （最终一致性） 线性化一致性要求操作生效的顺序等于操作的实际实时顺序，顺序一致性允许对操作进行重新排序，只要在每个节点上观察到的顺序保持一致</p></div><footer class=entry-footer><span title='2020-09-15 09:22:15 +0800 +0800'>2020年9月15日</span>&nbsp;·&nbsp;<span>zhoukuncheng</span></footer><a class=entry-link aria-label="post link to Distributed Systems for Fun and Profit 笔记（二）" href=https://zhoukuncheng.github.io/zh/posts/distributed-systems-for-fun-and-profit-part2/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Distributed Systems for Fun and Profit 笔记 （一）</h2></header><div class=entry-content><p>0. 前言 “Distributed Systems for Fun and Profit” 是 mixu 2013 年在 网络上 免费发布的一本介绍分布式系统的小册子。
分布式的两种结果：
信息以光速传播 独立节点独自失败 分布式系统处理距离和多个节点的问题
1. 从高层次角度看分布式系统 计算机的基本任务
存储
计算
分布式编程就是用多机解决在单机上的相同问题，通常此问题单机已经不能满足要求。
小规模时，单个节点上升级硬件可以解决问题，但随着问题规模增大，单节点升级硬件无法解决或者成本过高时就需要分布式系统。当前最值得的是中档的商业硬件，通过容错软件降低成本。
增加新机器不会像理想情况一样线性增加性能和容量。
本文重点是讨论数据中心上的分布式编程。
实现目标：可扩展性等优点 可扩展性 可扩展性（Scalability）：系统、网络或进程有能力处理不断增长的工作量的能力，或者为了适应这种增长而进行扩展的能力
大小可扩展 地理可扩展 管理可扩展 性能与延迟 性能（Performance）：参照资源和时间，系统完成的有效工作量
延迟（Latency）：重要是的新数据在系统中出现的时间，分布式系统中受制于光速和硬盘速度等
可用性（容错） 可用性（Availability）：系统处于正常运行状态的时间比例， Availability = uptime / (uptime + downtime)
分布式系统可以通过冗余实现容忍部分故障
容错（Fault tolerance）：故障发生后系统以明确定义的方式运行的能力
制约 分布式系统受两个物理因素的约束：
节点数（随所需的存储和计算能力而增加） 节点之间的距离（信息最多以光速传播） 性能和可用性由外部定义，通常表述为SLA（服务级别协议）
抽象和模型 抽象使事情变得更易于管理，模型精确描述分布式系统的关键特性。
如：
系统模型（异步/同步）
失败模型（崩溃失败，分区，拜占庭）
一致性模型（强一致，最终一致）
设计技巧：分区和复制 分区（Partition） 将大数据集划分为小的独立集
分区通过限制要检查的数据量并在同一分区中定位相关数据来提高性能 分区通过允许分区独立发生故障来提高可用性 复制（Replication） 在多机上复制相同的数据，是对抗延迟的主要办法
通过增加新数据副本上的计算能力和带宽来提高性能 通过创建数据的其他副本来提高可用性 复制需要遵循一致性模型</p></div><footer class=entry-footer><span title='2020-09-11 01:51:32 +0800 +0800'>2020年9月11日</span>&nbsp;·&nbsp;<span>zhoukuncheng</span></footer><a class=entry-link aria-label="post link to Distributed Systems for Fun and Profit 笔记 （一）" href=https://zhoukuncheng.github.io/zh/posts/distributed-systems-for-fun-and-profit-part1/></a></article></main><footer class=footer><span>&copy; 2026 <a href=https://zhoukuncheng.github.io/zh/>zhoukuncheng's Personal Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>