<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>借助 LLM 和 Telegram 机器人，让背单词不再枯燥 | zhoukuncheng's Personal Blog</title>
<meta name=keywords content="English,Telegram Bot,Python,LLM"><meta name=description content="背英语单词总是 Abandon？ 向多邻国 🦉 取经，让单词主动提醒自己 背单词，在英语学习中实在无法避免，从小学到研究生，甚至工作需要。 但抱着单词书啃，或者手机上一板一眼背单词，效率实在太低。现在 LLM 这么火，为何不利用起来？ 毕竟 LLM 中间的 L 就是 Language 的意思，LLM 对付其他严谨任务可能差点意思，但英语等语言可是它的强项，能用技术解决问题，就不要麻烦自己！ 本文就来分享一下，怎么用欧路词典 API、LLM 和 Telegram 机器人搞个英"><meta name=author content><link rel=canonical href=https://zhoukuncheng.github.io/posts/llm-vocabulary-reminder/><link crossorigin=anonymous href=/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U+6hYRq/Ez/nm5vg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://zhoukuncheng.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://zhoukuncheng.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://zhoukuncheng.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://zhoukuncheng.github.io/apple-touch-icon.png><link rel=mask-icon href=https://zhoukuncheng.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://zhoukuncheng.github.io/posts/llm-vocabulary-reminder/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="借助 LLM 和 Telegram 机器人，让背单词不再枯燥"><meta property="og:description" content="背英语单词总是 Abandon？ 向多邻国 🦉 取经，让单词主动提醒自己 背单词，在英语学习中实在无法避免，从小学到研究生，甚至工作需要。 但抱着单词书啃，或者手机上一板一眼背单词，效率实在太低。现在 LLM 这么火，为何不利用起来？ 毕竟 LLM 中间的 L 就是 Language 的意思，LLM 对付其他严谨任务可能差点意思，但英语等语言可是它的强项，能用技术解决问题，就不要麻烦自己！ 本文就来分享一下，怎么用欧路词典 API、LLM 和 Telegram 机器人搞个英"><meta property="og:type" content="article"><meta property="og:url" content="https://zhoukuncheng.github.io/posts/llm-vocabulary-reminder/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-04-19T00:11:00+08:00"><meta property="article:modified_time" content="2024-04-19T00:11:00+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="借助 LLM 和 Telegram 机器人，让背单词不再枯燥"><meta name=twitter:description content="背英语单词总是 Abandon？ 向多邻国 🦉 取经，让单词主动提醒自己 背单词，在英语学习中实在无法避免，从小学到研究生，甚至工作需要。 但抱着单词书啃，或者手机上一板一眼背单词，效率实在太低。现在 LLM 这么火，为何不利用起来？ 毕竟 LLM 中间的 L 就是 Language 的意思，LLM 对付其他严谨任务可能差点意思，但英语等语言可是它的强项，能用技术解决问题，就不要麻烦自己！ 本文就来分享一下，怎么用欧路词典 API、LLM 和 Telegram 机器人搞个英"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://zhoukuncheng.github.io/posts/"},{"@type":"ListItem","position":2,"name":"借助 LLM 和 Telegram 机器人，让背单词不再枯燥","item":"https://zhoukuncheng.github.io/posts/llm-vocabulary-reminder/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"借助 LLM 和 Telegram 机器人，让背单词不再枯燥","name":"借助 LLM 和 Telegram 机器人，让背单词不再枯燥","description":"背英语单词总是 Abandon？ 向多邻国 🦉 取经，让单词主动提醒自己 背单词，在英语学习中实在无法避免，从小学到研究生，甚至工作需要。 但抱着单词书啃，或者手机上一板一眼背单词，效率实在太低。现在 LLM 这么火，为何不利用起来？ 毕竟 LLM 中间的 L 就是 Language 的意思，LLM 对付其他严谨任务可能差点意思，但英语等语言可是它的强项，能用技术解决问题，就不要麻烦自己！ 本文就来分享一下，怎么用欧路词典 API、LLM 和 Telegram 机器人搞个英","keywords":["English","Telegram Bot","Python","LLM"],"articleBody":"背英语单词总是 Abandon？ 向多邻国 🦉 取经，让单词主动提醒自己 背单词，在英语学习中实在无法避免，从小学到研究生，甚至工作需要。\n但抱着单词书啃，或者手机上一板一眼背单词，效率实在太低。现在 LLM 这么火，为何不利用起来？\n毕竟 LLM 中间的 L 就是 Language 的意思，LLM 对付其他严谨任务可能差点意思，但英语等语言可是它的强项，能用技术解决问题，就不要麻烦自己！\n本文就来分享一下，怎么用欧路词典 API、LLM 和 Telegram 机器人搞个英语词汇学习助手，让你背单词不再痛苦。\n当然，也可能用几天就感觉很烦人，毕竟灵感来自多邻国 App🦉。\n项目目标：解放注意力 不用主动去硬背单词，而是让程序代劳，并且要根据单词生成例句和文章，让你更好地理解和记忆。总之，就是让你背单词更轻松、更有效率。\n系统架构 欧路词典 API： 欧路词典既可以查词又可以背单词，就选它了。 LLM (比如 Groq)： 大语言模型，可以根据单词生成各种例句、对话甚至文章，让你更好地理解单词的用法。还可以利用它生成符合雅思 IELTS 写作考核标准的文章，帮助你学习英语写作。Groq 是目前容易免费获取的 LLM API，可以选择 Mixtral 8x7b 模型。 Telegram 机器人： Telegram 平台相比微信，QQ 等自由、API 强大，功能丰富，最适合用它来当提醒工具。 格式转换： 由于 Telegram 消息对 Markdown 的限制，和 Telegraph 写作平台对 HTML 标签的限制，我们需要进行格式转换，确保内容能够正确显示。 实现方法 获取生词列表 接口文档： https://my.eudic.net/OpenAPI/doc_api_study\n获取所有生词本 接口说明： 请求方式：GET 请求地址：https://api.frdic.com/api/open/v1/studylist/category 本接口用于获取生词本信息 生词本的ID是唯一标识，用于调用其他接口 生成例句和文章\nasync def gen_chat_completion(sys_prompt: str, prompt: str) -\u003e str: # ... LLM 调用代码 (例如 Groq)... chat_completion = await client.chat.completions.create( messages=[ {\"role\": \"system\", \"content\": sys_prompt}, {\"role\": \"user\", \"content\": prompt}, ], # ... 其他参数设置 ... ) return chat_completion.choices[0].message.content 使用如下 sys_prompt 让 LLM 解释单词：\nYou are a professional English teacher. Given a English word, output their definitions in both English and Chinese, and synonyms and antonyms. Don't omit any word from the list. Must explain all meanings of the word. Additionally, include all tenses and voices for each word. Then provide collocations and example sentences. Format: Markdown. Example: **desert** *Definition*: - 🇬🇧: - n. arid land with little or no vegetation - v. leave someone who needs or counts on you; leave in the lurch - v. desert (a cause, a country or an army), often in order to join the opposing cause, country, or army - adj. located in a dismal or remote area; desolate - 🇨🇳: - n. 沙漠，荒漠；荒凉的地方；应得的赏罚 - v. 离弃，舍弃（某地）；抛弃，遗弃（某人）；背弃，放弃；擅离，开小差；突然丧失 - adj. 无人居住的，荒凉的；像沙漠的 *Synonyms*: - vt. yield , quit - vi. run out on, walk out on - n. sands, wold - adj. arid, desolate, lonely, uninhabited *Antonyms*: - adj. inhabited, populated *Collocation*: desert island n. 荒岛; sahara desert 撒哈拉大沙漠 *Sentence*: - 🇬🇧: The heat in the desert was extreme. - 🇨🇳: 沙漠中极其炎热 ----------------- 使用以下 sys_prompt 指导 LLM 生成符合雅思写作标准的文章：\nYou are a professional English writer. Given some English words, Utilize all of the provided English words to compose an essay that does not exceed 280 words. (Do not omit any word from the list). and following IELTS criteria. The topic is in (Art, Business \u0026 Money, Communication \u0026 Personality, Crime \u0026 Punishment, Education, Environment, Family \u0026 Children, Food \u0026 Diet, Government, Health, Housing, Buildings \u0026 Urban Planning, Language, Leisure, Media \u0026 Advertising, Reading, Society, Space Exploration, Sport \u0026 Exercise, Technology, Tourism and Travel, Transport, Work). Essay types: 1. Opinion Essays 2. Discussion Essays 3. Problem Solution Essays 4. Advantages \u0026 Disadvantages Essays 5. Double Question Essays Criteria: -------- Task achievement ... Coherence and cohesion ... Lexical resource ... Grammatical range and accuracy ... -------- Format: Markdown. Include title and content. Highlight these given words in the Essay use HTML syntax. 格式转换\n将 LLM 生成的 Markdown 格式文本转换为 Telegram 支持的格式，例如使用 telegramify_markdown 库。 将 Markdown 格式文本转换为 Telegraph 支持的 HTML 格式，并进行必要的标签过滤和调整。 # llm explain llm_explain = await gen_chat_completion( sys_message_explanation, f'word: \"{word}\"' ) await context.bot.send_message( job.chat_id, telegramify_markdown.convert(llm_explain), parse_mode=\"MarkdownV2\", reply_to_message_id=msg.message_id, ) async def write_to_telegraph(html: str) -\u003e str: telegraph = Telegraph() if not telegraph.get_access_token(): logging.info(await telegraph.create_account(short_name=\"anonymous\")) response = await telegraph.create_page( f\"Glossary {datetime.datetime.now(datetime.UTC)}\", html_content=html, ) logging.info(response) return response[\"url\"] article_url = await write_to_telegraph( mistune.create_markdown( escape=False, hard_wrap=True, plugins=[\"strikethrough\", \"footnotes\", \"table\", \"speedup\"], )( llm_response, ) ) await context.bot.send_message(job.chat_id, article_url) Edge TTS 朗读\nVOICE = os.getenv(\"EDGE_TTS_VOICE\", \"en-US-AvaMultilingualNeural\") async def gen_tts_audio(text: str, filename: str) -\u003e None: \"\"\"Main function\"\"\" communicate = edge_tts.Communicate(text, VOICE) await communicate.save(filename) 定时发送 Telegram 消息\ntimes = [(x, random.randint(15, 55)) for x in range(8, 23)] for h, m in times: context.job_queue.run_daily( daily_message, datetime.time(hour=h, minute=m, tzinfo=pytz.timezone(\"Asia/Shanghai\")), name=f\"{h}:{m} job\", chat_id=update.message.chat_id, ) 未来规划 更多生词本来源： 如扇贝、有道，或者本地 mdict 文件等。 更强大的 LLM： 接入 GPT 4 或者 Claude Opus 级别。 更多提醒方式： 如生成 ical 文件，可以添加到日历中。 总而言之，让我们从传统按顺序啃单词的枯燥方式解放，在 AI 时代，充分利用 LLM，重新思考背单词的习惯。\n","wordCount":"1467","inLanguage":"en","datePublished":"2024-04-19T00:11:00+08:00","dateModified":"2024-04-19T00:11:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://zhoukuncheng.github.io/posts/llm-vocabulary-reminder/"},"publisher":{"@type":"Organization","name":"zhoukuncheng's Personal Blog","logo":{"@type":"ImageObject","url":"https://zhoukuncheng.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://zhoukuncheng.github.io/ accesskey=h title="zhoukuncheng's Personal Blog (Alt + H)">zhoukuncheng's Personal Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://zhoukuncheng.github.io/ title=Home><span>Home</span></a></li><li><a href=https://zhoukuncheng.github.io/posts/ title=Archive><span>Archive</span></a></li><li><a href=https://zhoukuncheng.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://zhoukuncheng.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://zhoukuncheng.github.io/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>借助 LLM 和 Telegram 机器人，让背单词不再枯燥</h1><div class=post-meta><span title='2024-04-19 00:11:00 +0800 +0800'>April 19, 2024</span></div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e8%83%8c%e8%8b%b1%e8%af%ad%e5%8d%95%e8%af%8d%e6%80%bb%e6%98%af-abandon-%e5%90%91%e5%a4%9a%e9%82%bb%e5%9b%bd--%e5%8f%96%e7%bb%8f%e8%ae%a9%e5%8d%95%e8%af%8d%e4%b8%bb%e5%8a%a8%e6%8f%90%e9%86%92%e8%87%aa%e5%b7%b1 aria-label="背英语单词总是 Abandon？ 向多邻国 🦉 取经，让单词主动提醒自己">背英语单词总是 Abandon？ 向多邻国 🦉 取经，让单词主动提醒自己</a><ul><li><a href=#%e9%a1%b9%e7%9b%ae%e7%9b%ae%e6%a0%87%e8%a7%a3%e6%94%be%e6%b3%a8%e6%84%8f%e5%8a%9b aria-label=项目目标：解放注意力>项目目标：解放注意力</a></li><li><a href=#%e7%b3%bb%e7%bb%9f%e6%9e%b6%e6%9e%84 aria-label=系统架构>系统架构</a></li><li><a href=#%e5%ae%9e%e7%8e%b0%e6%96%b9%e6%b3%95 aria-label=实现方法>实现方法</a></li><li><a href=#%e6%9c%aa%e6%9d%a5%e8%a7%84%e5%88%92 aria-label=未来规划>未来规划</a></li></ul></li></ul></div></details></div><div class=post-content><h2 id=背英语单词总是-abandon-向多邻国--取经让单词主动提醒自己>背英语单词总是 Abandon？ 向多邻国 🦉 取经，让单词主动提醒自己<a hidden class=anchor aria-hidden=true href=#背英语单词总是-abandon-向多邻国--取经让单词主动提醒自己>#</a></h2><p>背单词，在英语学习中实在无法避免，从小学到研究生，甚至工作需要。<br>但抱着单词书啃，或者手机上一板一眼背单词，效率实在太低。现在 LLM 这么火，为何不利用起来？<br>毕竟 LLM 中间的 L 就是 Language 的意思，LLM 对付其他严谨任务可能差点意思，但英语等语言可是它的强项，能用技术解决问题，就不要麻烦自己！<br>本文就来分享一下，怎么用欧路词典 API、LLM 和 Telegram 机器人搞个英语词汇学习助手，让你背单词不再痛苦。<br>当然，也可能用几天就感觉很烦人，毕竟灵感来自多邻国 App🦉。</p><h3 id=项目目标解放注意力>项目目标：解放注意力<a hidden class=anchor aria-hidden=true href=#项目目标解放注意力>#</a></h3><p>不用主动去硬背单词，而是让程序代劳，并且要根据单词生成例句和文章，让你更好地理解和记忆。总之，就是让你背单词更轻松、更有效率。</p><h3 id=系统架构>系统架构<a hidden class=anchor aria-hidden=true href=#系统架构>#</a></h3><p><img loading=lazy src=/static/mermaid-diagram-2024-04-19-010615.svg alt=流程></p><ul><li><strong>欧路词典 API：</strong> 欧路词典既可以查词又可以背单词，就选它了。</li><li><strong>LLM (比如 Groq)：</strong> 大语言模型，可以根据单词生成各种例句、对话甚至文章，让你更好地理解单词的用法。还可以利用它生成符合雅思
IELTS 写作考核标准的文章，帮助你学习英语写作。Groq 是目前容易免费获取的 LLM API，可以选择 Mixtral 8x7b 模型。</li><li><strong>Telegram 机器人：</strong> Telegram 平台相比微信，QQ 等自由、API 强大，功能丰富，最适合用它来当提醒工具。</li><li><strong>格式转换：</strong> 由于 Telegram 消息对 Markdown 的限制，和 Telegraph 写作平台对 HTML 标签的限制，我们需要进行格式转换，确保内容能够正确显示。</li></ul><h3 id=实现方法>实现方法<a hidden class=anchor aria-hidden=true href=#实现方法>#</a></h3><ol><li><p><strong>获取生词列表</strong>
接口文档： <a href=https://my.eudic.net/OpenAPI/doc_api_study>https://my.eudic.net/OpenAPI/doc_api_study</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl> 获取所有生词本
</span></span><span class=line><span class=cl> 接口说明：
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> 请求方式：GET
</span></span><span class=line><span class=cl> 请求地址：https://api.frdic.com/api/open/v1/studylist/category
</span></span><span class=line><span class=cl> 本接口用于获取生词本信息
</span></span><span class=line><span class=cl> 生词本的ID是唯一标识，用于调用其他接口
</span></span></code></pre></div></li><li><p><strong>生成例句和文章</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>gen_chat_completion</span><span class=p>(</span><span class=n>sys_prompt</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>prompt</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># ... LLM 调用代码 (例如 Groq)...</span>
</span></span><span class=line><span class=cl>    <span class=n>chat_completion</span> <span class=o>=</span> <span class=k>await</span> <span class=n>client</span><span class=o>.</span><span class=n>chat</span><span class=o>.</span><span class=n>completions</span><span class=o>.</span><span class=n>create</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>messages</span><span class=o>=</span><span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span><span class=s2>&#34;role&#34;</span><span class=p>:</span> <span class=s2>&#34;system&#34;</span><span class=p>,</span> <span class=s2>&#34;content&#34;</span><span class=p>:</span> <span class=n>sys_prompt</span><span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span><span class=s2>&#34;role&#34;</span><span class=p>:</span> <span class=s2>&#34;user&#34;</span><span class=p>,</span> <span class=s2>&#34;content&#34;</span><span class=p>:</span> <span class=n>prompt</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=c1># ... 其他参数设置 ...</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>chat_completion</span><span class=o>.</span><span class=n>choices</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>message</span><span class=o>.</span><span class=n>content</span>
</span></span></code></pre></div><p>使用如下 <code>sys_prompt</code> 让 LLM 解释单词：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>You are a professional English teacher.
</span></span><span class=line><span class=cl>                 Given a English word, 
</span></span><span class=line><span class=cl>                 output their definitions in both English and Chinese, 
</span></span><span class=line><span class=cl>                 and synonyms and antonyms.
</span></span><span class=line><span class=cl>                 Don&#39;t omit any word from the list.
</span></span><span class=line><span class=cl>                 Must explain all meanings of the word.
</span></span><span class=line><span class=cl>                 Additionally, include all tenses and voices for each word.
</span></span><span class=line><span class=cl>                 Then provide collocations and example sentences.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                 Format: Markdown.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                 Example:
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                 **desert**
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                 *Definition*:
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                 - 🇬🇧: 
</span></span><span class=line><span class=cl>                     - n. arid land with little or no vegetation
</span></span><span class=line><span class=cl>                     - v. leave someone who needs or counts on you; leave in the lurch
</span></span><span class=line><span class=cl>                     - v. desert (a cause, a country or an army), often in order to join the opposing cause, country, or army
</span></span><span class=line><span class=cl>                     - adj. located in a dismal or remote area; desolate
</span></span><span class=line><span class=cl>                 - 🇨🇳: 
</span></span><span class=line><span class=cl>                     - n. 沙漠，荒漠；荒凉的地方；应得的赏罚
</span></span><span class=line><span class=cl>                     - v. 离弃，舍弃（某地）；抛弃，遗弃（某人）；背弃，放弃；擅离，开小差；突然丧失
</span></span><span class=line><span class=cl>                     - adj. 无人居住的，荒凉的；像沙漠的
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                 *Synonyms*: 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                 - vt. yield , quit
</span></span><span class=line><span class=cl>                 - vi. run out on, walk out on
</span></span><span class=line><span class=cl>                 - n. sands, wold
</span></span><span class=line><span class=cl>                 - adj. arid, desolate, lonely, uninhabited
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                 *Antonyms*:
</span></span><span class=line><span class=cl>                 - adj. inhabited, populated
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                 *Collocation*: 
</span></span><span class=line><span class=cl>                 desert island n. 荒岛; sahara desert 撒哈拉大沙漠
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                 *Sentence*:
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                 - 🇬🇧: The heat in the desert was extreme.
</span></span><span class=line><span class=cl>                 - 🇨🇳: 沙漠中极其炎热
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                 -----------------             
</span></span></code></pre></div><p>使用以下 <code>sys_prompt</code> 指导 LLM 生成符合雅思写作标准的文章：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>You are a professional English writer.
</span></span><span class=line><span class=cl>Given some English words, Utilize all of the provided English words to compose an essay that does not exceed 280 words. (Do not omit any word from the list). 
</span></span><span class=line><span class=cl>and following IELTS criteria.
</span></span><span class=line><span class=cl>The topic is in 
</span></span><span class=line><span class=cl>(Art, Business &amp; Money, Communication &amp; Personality, Crime &amp; Punishment, Education, Environment, Family &amp; Children, Food &amp; Diet, Government, Health, Housing, Buildings &amp; Urban Planning, Language, Leisure, Media &amp; Advertising, Reading, Society, Space Exploration, Sport &amp; Exercise, Technology, Tourism and Travel, Transport, Work).
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Essay types:
</span></span><span class=line><span class=cl>1.  Opinion Essays 
</span></span><span class=line><span class=cl>2.  Discussion Essays
</span></span><span class=line><span class=cl>3.  Problem Solution Essays
</span></span><span class=line><span class=cl>4.  Advantages &amp; Disadvantages Essays
</span></span><span class=line><span class=cl>5.  Double Question Essays
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Criteria:
</span></span><span class=line><span class=cl>--------
</span></span><span class=line><span class=cl>Task achievement
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Coherence and cohesion
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Lexical resource
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Grammatical range and accuracy
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>--------
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Format: Markdown.
</span></span><span class=line><span class=cl>Include title and content.
</span></span><span class=line><span class=cl>Highlight these given words in the Essay use HTML syntax.
</span></span></code></pre></div></li><li><p><strong>格式转换</strong></p><ul><li>将 LLM 生成的 Markdown 格式文本转换为 Telegram 支持的格式，例如使用 <code>telegramify_markdown</code> 库。</li><li>将 Markdown 格式文本转换为 Telegraph 支持的 HTML 格式，并进行必要的标签过滤和调整。</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl> <span class=c1># llm explain</span>
</span></span><span class=line><span class=cl> <span class=n>llm_explain</span> <span class=o>=</span> <span class=k>await</span> <span class=n>gen_chat_completion</span><span class=p>(</span>
</span></span><span class=line><span class=cl>     <span class=n>sys_message_explanation</span><span class=p>,</span> <span class=sa>f</span><span class=s1>&#39;word: &#34;</span><span class=si>{</span><span class=n>word</span><span class=si>}</span><span class=s1>&#34;&#39;</span>
</span></span><span class=line><span class=cl> <span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=k>await</span> <span class=n>context</span><span class=o>.</span><span class=n>bot</span><span class=o>.</span><span class=n>send_message</span><span class=p>(</span>
</span></span><span class=line><span class=cl>     <span class=n>job</span><span class=o>.</span><span class=n>chat_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>     <span class=n>telegramify_markdown</span><span class=o>.</span><span class=n>convert</span><span class=p>(</span><span class=n>llm_explain</span><span class=p>),</span>
</span></span><span class=line><span class=cl>     <span class=n>parse_mode</span><span class=o>=</span><span class=s2>&#34;MarkdownV2&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>     <span class=n>reply_to_message_id</span><span class=o>=</span><span class=n>msg</span><span class=o>.</span><span class=n>message_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=p>)</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>write_to_telegraph</span><span class=p>(</span><span class=n>html</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span></span><span class=line><span class=cl> <span class=n>telegraph</span> <span class=o>=</span> <span class=n>Telegraph</span><span class=p>()</span>
</span></span><span class=line><span class=cl> <span class=k>if</span> <span class=ow>not</span> <span class=n>telegraph</span><span class=o>.</span><span class=n>get_access_token</span><span class=p>():</span>
</span></span><span class=line><span class=cl>     <span class=n>logging</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=k>await</span> <span class=n>telegraph</span><span class=o>.</span><span class=n>create_account</span><span class=p>(</span><span class=n>short_name</span><span class=o>=</span><span class=s2>&#34;anonymous&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=n>response</span> <span class=o>=</span> <span class=k>await</span> <span class=n>telegraph</span><span class=o>.</span><span class=n>create_page</span><span class=p>(</span>
</span></span><span class=line><span class=cl>     <span class=sa>f</span><span class=s2>&#34;Glossary </span><span class=si>{</span><span class=n>datetime</span><span class=o>.</span><span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>(</span><span class=n>datetime</span><span class=o>.</span><span class=n>UTC</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>     <span class=n>html_content</span><span class=o>=</span><span class=n>html</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=n>logging</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=n>response</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=k>return</span> <span class=n>response</span><span class=p>[</span><span class=s2>&#34;url&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=n>article_url</span> <span class=o>=</span> <span class=k>await</span> <span class=n>write_to_telegraph</span><span class=p>(</span>
</span></span><span class=line><span class=cl>     <span class=n>mistune</span><span class=o>.</span><span class=n>create_markdown</span><span class=p>(</span>
</span></span><span class=line><span class=cl>         <span class=n>escape</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
</span></span><span class=line><span class=cl>         <span class=n>hard_wrap</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>         <span class=n>plugins</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;strikethrough&#34;</span><span class=p>,</span> <span class=s2>&#34;footnotes&#34;</span><span class=p>,</span> <span class=s2>&#34;table&#34;</span><span class=p>,</span> <span class=s2>&#34;speedup&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>     <span class=p>)(</span>
</span></span><span class=line><span class=cl>         <span class=n>llm_response</span><span class=p>,</span>
</span></span><span class=line><span class=cl>     <span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=k>await</span> <span class=n>context</span><span class=o>.</span><span class=n>bot</span><span class=o>.</span><span class=n>send_message</span><span class=p>(</span><span class=n>job</span><span class=o>.</span><span class=n>chat_id</span><span class=p>,</span> <span class=n>article_url</span><span class=p>)</span>
</span></span></code></pre></div></li><li><p><strong>Edge TTS 朗读</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>VOICE</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s2>&#34;EDGE_TTS_VOICE&#34;</span><span class=p>,</span> <span class=s2>&#34;en-US-AvaMultilingualNeural&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>gen_tts_audio</span><span class=p>(</span><span class=n>text</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>filename</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;Main function&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>communicate</span> <span class=o>=</span> <span class=n>edge_tts</span><span class=o>.</span><span class=n>Communicate</span><span class=p>(</span><span class=n>text</span><span class=p>,</span> <span class=n>VOICE</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>communicate</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=n>filename</span><span class=p>)</span>
</span></span></code></pre></div></li><li><p><strong>定时发送 Telegram 消息</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>    <span class=n>times</span> <span class=o>=</span> <span class=p>[(</span><span class=n>x</span><span class=p>,</span> <span class=n>random</span><span class=o>.</span><span class=n>randint</span><span class=p>(</span><span class=mi>15</span><span class=p>,</span> <span class=mi>55</span><span class=p>))</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>8</span><span class=p>,</span> <span class=mi>23</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>h</span><span class=p>,</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>times</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>context</span><span class=o>.</span><span class=n>job_queue</span><span class=o>.</span><span class=n>run_daily</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>daily_message</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>datetime</span><span class=o>.</span><span class=n>time</span><span class=p>(</span><span class=n>hour</span><span class=o>=</span><span class=n>h</span><span class=p>,</span> <span class=n>minute</span><span class=o>=</span><span class=n>m</span><span class=p>,</span> <span class=n>tzinfo</span><span class=o>=</span><span class=n>pytz</span><span class=o>.</span><span class=n>timezone</span><span class=p>(</span><span class=s2>&#34;Asia/Shanghai&#34;</span><span class=p>)),</span>
</span></span><span class=line><span class=cl>            <span class=n>name</span><span class=o>=</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>h</span><span class=si>}</span><span class=s2>:</span><span class=si>{</span><span class=n>m</span><span class=si>}</span><span class=s2> job&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>chat_id</span><span class=o>=</span><span class=n>update</span><span class=o>.</span><span class=n>message</span><span class=o>.</span><span class=n>chat_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span></code></pre></div></li></ol><h3 id=未来规划>未来规划<a hidden class=anchor aria-hidden=true href=#未来规划>#</a></h3><ul><li><strong>更多生词本来源：</strong> 如扇贝、有道，或者本地 mdict 文件等。</li><li><strong>更强大的 LLM：</strong> 接入 GPT 4 或者 Claude Opus 级别。</li><li><strong>更多提醒方式：</strong> 如生成 ical 文件，可以添加到日历中。</li></ul><p>总而言之，让我们从传统按顺序啃单词的枯燥方式解放，在 AI 时代，充分利用 LLM，重新思考背单词的习惯。</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://zhoukuncheng.github.io/tags/english/>English</a></li><li><a href=https://zhoukuncheng.github.io/tags/telegram-bot/>Telegram Bot</a></li><li><a href=https://zhoukuncheng.github.io/tags/python/>Python</a></li><li><a href=https://zhoukuncheng.github.io/tags/llm/>LLM</a></li></ul></footer><script src=https://giscus.app/client.js data-repo=zhoukuncheng/zhoukuncheng.github.io data-repo-id="MDEwOlJlcG9zaXRvcnkyODIxMTA1OTU=" data-category=General data-category-id=DIC_kwDOENCqg84Cexta data-mapping=og:title data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=purple_dark data-lang=en crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2024 <a href=https://zhoukuncheng.github.io/>zhoukuncheng's Personal Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>