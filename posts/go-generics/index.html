<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Go 1.18 泛型介绍 | zhoukuncheng's Personal Blog</title>
<meta name=keywords content="Golang,Generics,Go 1.18"><meta name=description content='什么是泛型 泛型程序设计（generic programming）是程序设计语言的一种风格或范式。泛型允许程序员在编写代码时使用一些以后才指定的类型，在实例化时作为参数指明这些类型。 Golang 泛型基本用法 示例 map 操作 package main import ( "fmt" ) func mapFunc[T any, M any](a []T, f func(T) M) []M { n := make([]M, len(a), cap(a)) for i, e := range a { n[i] = f(e) } return n } func main() { vi := []int{1, 2, 3, 4, 5, 6} vs := mapFunc(vi, func(v int) string { return "<" + fmt.Sprint(v * v) + ">" }) fmt.Println(vs) } min max 函数 package main import ( "fmt" ) type ordered interface { ~int | ~int8 | ~int16 | ~int32 | ~int64 | ~uint | ~uint8 | ~uint16 | ~uint32 | ~uint64 |'><meta name=author content><link rel=canonical href=https://zhoukuncheng.github.io/posts/go-generics/><link crossorigin=anonymous href=/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U+6hYRq/Ez/nm5vg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://zhoukuncheng.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://zhoukuncheng.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://zhoukuncheng.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://zhoukuncheng.github.io/apple-touch-icon.png><link rel=mask-icon href=https://zhoukuncheng.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://zhoukuncheng.github.io/posts/go-generics/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Go 1.18 泛型介绍"><meta property="og:description" content='什么是泛型 泛型程序设计（generic programming）是程序设计语言的一种风格或范式。泛型允许程序员在编写代码时使用一些以后才指定的类型，在实例化时作为参数指明这些类型。 Golang 泛型基本用法 示例 map 操作 package main import ( "fmt" ) func mapFunc[T any, M any](a []T, f func(T) M) []M { n := make([]M, len(a), cap(a)) for i, e := range a { n[i] = f(e) } return n } func main() { vi := []int{1, 2, 3, 4, 5, 6} vs := mapFunc(vi, func(v int) string { return "<" + fmt.Sprint(v * v) + ">" }) fmt.Println(vs) } min max 函数 package main import ( "fmt" ) type ordered interface { ~int | ~int8 | ~int16 | ~int32 | ~int64 | ~uint | ~uint8 | ~uint16 | ~uint32 | ~uint64 |'><meta property="og:type" content="article"><meta property="og:url" content="https://zhoukuncheng.github.io/posts/go-generics/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-03-16T22:41:56+08:00"><meta property="article:modified_time" content="2022-03-16T22:41:56+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Go 1.18 泛型介绍"><meta name=twitter:description content='什么是泛型 泛型程序设计（generic programming）是程序设计语言的一种风格或范式。泛型允许程序员在编写代码时使用一些以后才指定的类型，在实例化时作为参数指明这些类型。 Golang 泛型基本用法 示例 map 操作 package main import ( "fmt" ) func mapFunc[T any, M any](a []T, f func(T) M) []M { n := make([]M, len(a), cap(a)) for i, e := range a { n[i] = f(e) } return n } func main() { vi := []int{1, 2, 3, 4, 5, 6} vs := mapFunc(vi, func(v int) string { return "<" + fmt.Sprint(v * v) + ">" }) fmt.Println(vs) } min max 函数 package main import ( "fmt" ) type ordered interface { ~int | ~int8 | ~int16 | ~int32 | ~int64 | ~uint | ~uint8 | ~uint16 | ~uint32 | ~uint64 |'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://zhoukuncheng.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Go 1.18 泛型介绍","item":"https://zhoukuncheng.github.io/posts/go-generics/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Go 1.18 泛型介绍","name":"Go 1.18 泛型介绍","description":"什么是泛型 泛型程序设计（generic programming）是程序设计语言的一种风格或范式。泛型允许程序员在编写代码时使用一些以后才指定的类型，在实例化时作为参数指明这些类型。 Golang 泛型基本用法 示例 map 操作 package main import ( \u0026#34;fmt\u0026#34; ) func mapFunc[T any, M any](a []T, f func(T) M) []M { n := make([]M, len(a), cap(a)) for i, e := range a { n[i] = f(e) } return n } func main() { vi := []int{1, 2, 3, 4, 5, 6} vs := mapFunc(vi, func(v int) string { return \u0026#34;\u0026lt;\u0026#34; + fmt.Sprint(v * v) + \u0026#34;\u0026gt;\u0026#34; }) fmt.Println(vs) } min max 函数 package main import ( \u0026#34;fmt\u0026#34; ) type ordered interface { ~int | ~int8 | ~int16 | ~int32 | ~int64 | ~uint | ~uint8 | ~uint16 | ~uint32 | ~uint64 |","keywords":["Golang","Generics","Go 1.18"],"articleBody":"什么是泛型 泛型程序设计（generic programming）是程序设计语言的一种风格或范式。泛型允许程序员在编写代码时使用一些以后才指定的类型，在实例化时作为参数指明这些类型。\nGolang 泛型基本用法 示例 map 操作\npackage main import ( \"fmt\" ) func mapFunc[T any, M any](a []T, f func(T) M) []M { n := make([]M, len(a), cap(a)) for i, e := range a { n[i] = f(e) } return n } func main() { vi := []int{1, 2, 3, 4, 5, 6} vs := mapFunc(vi, func(v int) string { return \"\u003c\" + fmt.Sprint(v * v) + \"\u003e\" }) fmt.Println(vs) } min max 函数\npackage main import ( \"fmt\" ) type ordered interface { ~int | ~int8 | ~int16 | ~int32 | ~int64 | ~uint | ~uint8 | ~uint16 | ~uint32 | ~uint64 | ~uintptr | ~float32 | ~float64 | ~string } func max[T ordered](a []T) T { m := a[0] for _, v := range a { if m \u003c v { m = v } } return m } func min[T ordered](a []T) T { m := a[0] for _, v := range a { if m \u003e v { m = v } } return m } func main() { vi := []int{1, 2, 3, 4, 5, 6, 7, 8, 9, 10} result := max(vi) fmt.Println(result) vii := []string{\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\"} result2 := min(vii) fmt.Println(result2) } Set\n// Package sets implements sets of any comparable type. package sets // Set is a set of values. type Set[T comparable] map[T]struct{} // Make returns a set of some element type. func Make[T comparable]() Set[T] { return make(Set[T]) } // Add adds v to the set s. // If v is already in s this has no effect. func (s Set[T]) Add(v T) { s[v] = struct{}{} } // Delete removes v from the set s. // If v is not in s this has no effect. func (s Set[T]) Delete(v T) { delete(s, v) } // Contains reports whether v is in s. func (s Set[T]) Contains(v T) bool { _, ok := s[v] return ok } // Len reports the number of elements in s. func (s Set[T]) Len() int { return len(s) } // Iterate invokes f on each element of s. // It's OK for f to call the Delete method. func (s Set[T]) Iterate(f func(T)) { for v := range s { f(v) } } 尝鲜试用 Go2Goplaygroud： The go2go Playground\nGo 1.17 （非最新，不推荐）：\ngo run -gcflags=-G=3 myproject``/main``.go\ngo 1.18 （正式版已发布）\nhttps://go.dev/doc/go1.18\nGolang 类型当前状况与泛型的意义 当前 interface 弊端：类型转换、缺乏编译时的约束\npackage main import \"fmt\" func printStr(x interface{}) { value, ok := x.(string) if !ok { fmt.Println(\"It's not ok for type string\") return } fmt.Println(\"The value is \", value) } func main() { printStr(123) } // It's not ok for type string 为不同类型单独编写 弊端：API与代码实现不整洁、工作量大等\n示例：当前标准库的 sort, math 等\nhttps://pkg.go.dev/sort https://pkg.go.dev/math 代码生成 弊端：需学习第三方代码生成工具、go:generate、AST等知识，不通用\n示例：\nhttps://github.com/cheekybits/genny\npackage gogenerate import \"github.com/cheekybits/genny/generic\" //go:generate genny -in=$GOFILE -out=gen-$GOFILE gen \"KeyType=string,int ValueType=string,int\" type KeyType generic.Type type ValueType generic.Type type KeyTypeValueTypeMap map[KeyType]ValueType func NewKeyTypeValueTypeMap() map[KeyType]ValueType { return make(map[KeyType]ValueType) } Go 官方泛型意义 通用操作与类型约束 函数式编程 简化标准库和第三方库的实现 ………\nGolang 泛型发展历史 简述 时间 作者 [Type Functions] 2010 年 Ian Lance Taylor Generalized Types 2011 年 Ian Lance Taylor Generalized Types v2 2013 年 Ian Lance Taylor Type Parameters 2013 年 Ian Lance Taylor go:generate 2014 年 Rob Pike First Class Types 2015 年 Bryan C.Mills Contracts 2018 年 Ian Lance Taylor, Robert Griesemer Contracts 2019 年 Ian Lance Taylor, Robert Griesemer Redundancy in Contracts(2019)’s Design 2019 年 Ian Lance Taylor, Robert Griesemer Constrained Type Parameters 2020 年 Ian Lance Taylor, Robert Griesemer Featherweight Go 2020年 Ian Lance Taylor, Robert Griesemer 合并进 master、发布 Go 1.18、改进标准库 等 2021 - 2022 年 Golang 泛型实现原理 他山之石 不同语言泛型实现 boxing (装箱) VS monomorphization (单态化)\n泛型的困境 https://research.swtch.com/generic\n拖累程序员: 比如 C 语言，增加了程序员的负担，需要曲折的实现，但是不对增加语言的复杂性 拖累编译器: 比如 C++，增加了编译器的负担，可能会产生很多冗余的代码，重复的代码还需要编译器斟酌删除，编译的文件可能非常大 拖累执行时间: 比如 Java，将一些装箱成 Object, 进行类型擦除。虽然减少代码冗余、减少空间，但是需要装箱拆箱操作，代码效率低 Go Keith H. Randal 的三个方案：\nGenerics implementation - Dictionaries\n编译时实例化字典，字典包含为类型参数实例化的类型信息\nGenerics implementation - Stenciling\n模板生成，为每个实例化类型生成一套独立的代码\nGenerics implementation - GC Shape Stenciling\n混合实现，shape类型相同的类型，使用字典区分类型的不同行为，\n类型的shape是指它对内存分配器/垃圾回收器呈现的方式，\n包括大小、所需的对齐方式以及类型的哪些部分包含指针\n参考资料 Go 官方和社区资料：\nhttps://go.dev/doc/go1.18\nhttps://go.dev/doc/tutorial/generics\nhttps://go.googlesource.com/proposal/+/refs/heads/master/design/43651-type-parameters.md\nhttps://go.dev/blog/generics-proposal\nhttps://go.dev/blog/generics-next-step\nhttps://go.dev/blog/go2draft\nhttps://go.dev/blog/why-generics\nhttps://github.com/golang/proposal/blob/master/design/generics-implementation-dictionaries.md\nhttps://github.com/golang/proposal/blob/master/design/generics-implementation-stenciling.md\nhttps://github.com/golang/proposal/blob/master/design/generics-implementation-gcshape.md\n示例用法、文章分析等：\nhttps://github.com/mattn/go-generics-example\nhttps://colobu.com/2021/08/30/how-is-go-generic-implemented/\nhttps://coolshell.cn/articles/21615.html\nhttps://draveness.me/whys-the-design-go-generics/\nhttps://taoshu.in/go/go-generics-design.html\nhttps://research.swtch.com/generic\nhttps://thume.ca/2019/07/14/a-tour-of-metaprogramming-models-for-generics/\n","wordCount":"1276","inLanguage":"en","datePublished":"2022-03-16T22:41:56+08:00","dateModified":"2022-03-16T22:41:56+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://zhoukuncheng.github.io/posts/go-generics/"},"publisher":{"@type":"Organization","name":"zhoukuncheng's Personal Blog","logo":{"@type":"ImageObject","url":"https://zhoukuncheng.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://zhoukuncheng.github.io/ accesskey=h title="zhoukuncheng's Personal Blog (Alt + H)">zhoukuncheng's Personal Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://zhoukuncheng.github.io/ title=Home><span>Home</span></a></li><li><a href=https://zhoukuncheng.github.io/posts/ title=Archive><span>Archive</span></a></li><li><a href=https://zhoukuncheng.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://zhoukuncheng.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://zhoukuncheng.github.io/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Go 1.18 泛型介绍</h1><div class=post-meta><span title='2022-03-16 22:41:56 +0800 +0800'>March 16, 2022</span></div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e4%bb%80%e4%b9%88%e6%98%af%e6%b3%9b%e5%9e%8b aria-label=什么是泛型>什么是泛型</a></li><li><a href=#golang-%e6%b3%9b%e5%9e%8b%e5%9f%ba%e6%9c%ac%e7%94%a8%e6%b3%95 aria-label="Golang 泛型基本用法">Golang 泛型基本用法</a><ul><li><a href=#%e7%a4%ba%e4%be%8b aria-label=示例>示例</a></li><li><a href=#%e5%b0%9d%e9%b2%9c%e8%af%95%e7%94%a8 aria-label=尝鲜试用>尝鲜试用</a></li></ul></li><li><a href=#golang-%e7%b1%bb%e5%9e%8b%e5%bd%93%e5%89%8d%e7%8a%b6%e5%86%b5%e4%b8%8e%e6%b3%9b%e5%9e%8b%e7%9a%84%e6%84%8f%e4%b9%89 aria-label="Golang 类型当前状况与泛型的意义">Golang 类型当前状况与泛型的意义</a><ul><li><a href=#%e5%bd%93%e5%89%8d aria-label=当前>当前</a><ul><li><a href=#interface aria-label=interface>interface</a></li><li><a href=#%e4%b8%ba%e4%b8%8d%e5%90%8c%e7%b1%bb%e5%9e%8b%e5%8d%95%e7%8b%ac%e7%bc%96%e5%86%99 aria-label=为不同类型单独编写>为不同类型单独编写</a></li><li><a href=#%e4%bb%a3%e7%a0%81%e7%94%9f%e6%88%90 aria-label=代码生成>代码生成</a></li></ul></li><li><a href=#go-%e5%ae%98%e6%96%b9%e6%b3%9b%e5%9e%8b%e6%84%8f%e4%b9%89 aria-label="Go 官方泛型意义">Go 官方泛型意义</a></li></ul></li><li><a href=#golang-%e6%b3%9b%e5%9e%8b%e5%8f%91%e5%b1%95%e5%8e%86%e5%8f%b2 aria-label="Golang 泛型发展历史">Golang 泛型发展历史</a></li><li><a href=#golang-%e6%b3%9b%e5%9e%8b%e5%ae%9e%e7%8e%b0%e5%8e%9f%e7%90%86 aria-label="Golang 泛型实现原理">Golang 泛型实现原理</a><ul><li><a href=#%e4%bb%96%e5%b1%b1%e4%b9%8b%e7%9f%b3 aria-label=他山之石>他山之石</a><ul><li><a href=#%e4%b8%8d%e5%90%8c%e8%af%ad%e8%a8%80%e6%b3%9b%e5%9e%8b%e5%ae%9e%e7%8e%b0 aria-label=不同语言泛型实现>不同语言泛型实现</a></li><li><a href=#%e6%b3%9b%e5%9e%8b%e7%9a%84%e5%9b%b0%e5%a2%83 aria-label=泛型的困境>泛型的困境</a></li></ul></li><li><a href=#go aria-label=Go>Go</a></li></ul></li><li><a href=#%e5%8f%82%e8%80%83%e8%b5%84%e6%96%99 aria-label=参考资料>参考资料</a></li></ul></div></details></div><div class=post-content><h2 id=什么是泛型>什么是泛型<a hidden class=anchor aria-hidden=true href=#什么是泛型>#</a></h2><p>泛型程序设计（generic programming）是程序设计语言的一种风格或范式。泛型允许程序员在编写代码时使用一些以后才指定的类型，在实例化时作为参数指明这些类型。</p><h2 id=golang-泛型基本用法>Golang 泛型基本用法<a hidden class=anchor aria-hidden=true href=#golang-泛型基本用法>#</a></h2><h3 id=示例>示例<a hidden class=anchor aria-hidden=true href=#示例>#</a></h3><p>map 操作</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nx>mapFunc</span><span class=p>[</span><span class=nx>T</span> <span class=nx>any</span><span class=p>,</span> <span class=nx>M</span> <span class=nx>any</span><span class=p>](</span><span class=nx>a</span> <span class=p>[]</span><span class=nx>T</span><span class=p>,</span> <span class=nx>f</span> <span class=kd>func</span><span class=p>(</span><span class=nx>T</span><span class=p>)</span> <span class=nx>M</span><span class=p>)</span> <span class=p>[]</span><span class=nx>M</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>n</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>([]</span><span class=nx>M</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=nx>a</span><span class=p>),</span> <span class=nb>cap</span><span class=p>(</span><span class=nx>a</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span> <span class=nx>i</span><span class=p>,</span> <span class=nx>e</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>a</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nx>n</span><span class=p>[</span><span class=nx>i</span><span class=p>]</span> <span class=p>=</span> <span class=nf>f</span><span class=p>(</span><span class=nx>e</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nx>n</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>vi</span> <span class=o>:=</span> <span class=p>[]</span><span class=kt>int</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=nx>vs</span> <span class=o>:=</span> <span class=nf>mapFunc</span><span class=p>(</span><span class=nx>vi</span><span class=p>,</span> <span class=kd>func</span><span class=p>(</span><span class=nx>v</span> <span class=kt>int</span><span class=p>)</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=s>&#34;&lt;&#34;</span> <span class=o>+</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprint</span><span class=p>(</span><span class=nx>v</span> <span class=o>*</span> <span class=nx>v</span><span class=p>)</span> <span class=o>+</span> <span class=s>&#34;&gt;&#34;</span>
</span></span><span class=line><span class=cl>	<span class=p>})</span>
</span></span><span class=line><span class=cl>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>vs</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>min max 函数</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>ordered</span> <span class=kd>interface</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=err>~</span><span class=kt>int</span> <span class=p>|</span> <span class=err>~</span><span class=kt>int8</span> <span class=p>|</span> <span class=err>~</span><span class=kt>int16</span> <span class=p>|</span> <span class=err>~</span><span class=kt>int32</span> <span class=p>|</span> <span class=err>~</span><span class=kt>int64</span> <span class=p>|</span> <span class=err>~</span><span class=kt>uint</span> <span class=p>|</span> <span class=err>~</span><span class=kt>uint8</span> <span class=p>|</span> <span class=err>~</span><span class=kt>uint16</span> <span class=p>|</span> <span class=err>~</span><span class=kt>uint32</span> <span class=p>|</span> <span class=err>~</span><span class=kt>uint64</span> <span class=p>|</span> <span class=err>~</span><span class=kt>uintptr</span> <span class=p>|</span> <span class=err>~</span><span class=kt>float32</span> <span class=p>|</span> <span class=err>~</span><span class=kt>float64</span> <span class=p>|</span> <span class=err>~</span><span class=kt>string</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nx>max</span><span class=p>[</span><span class=nx>T</span> <span class=nx>ordered</span><span class=p>](</span><span class=nx>a</span> <span class=p>[]</span><span class=nx>T</span><span class=p>)</span> <span class=nx>T</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>m</span> <span class=o>:=</span> <span class=nx>a</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>v</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>a</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=nx>m</span> <span class=p>&lt;</span> <span class=nx>v</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=nx>m</span> <span class=p>=</span> <span class=nx>v</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nx>m</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nx>min</span><span class=p>[</span><span class=nx>T</span> <span class=nx>ordered</span><span class=p>](</span><span class=nx>a</span> <span class=p>[]</span><span class=nx>T</span><span class=p>)</span> <span class=nx>T</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>m</span> <span class=o>:=</span> <span class=nx>a</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>v</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>a</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=nx>m</span> <span class=p>&gt;</span> <span class=nx>v</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=nx>m</span> <span class=p>=</span> <span class=nx>v</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nx>m</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>vi</span> <span class=o>:=</span> <span class=p>[]</span><span class=kt>int</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>9</span><span class=p>,</span> <span class=mi>10</span><span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=nx>result</span> <span class=o>:=</span> <span class=nb>max</span><span class=p>(</span><span class=nx>vi</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>result</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=nx>vii</span> <span class=o>:=</span> <span class=p>[]</span><span class=kt>string</span><span class=p>{</span><span class=s>&#34;a&#34;</span><span class=p>,</span> <span class=s>&#34;b&#34;</span><span class=p>,</span> <span class=s>&#34;c&#34;</span><span class=p>,</span> <span class=s>&#34;d&#34;</span><span class=p>,</span> <span class=s>&#34;e&#34;</span><span class=p>,</span> <span class=s>&#34;f&#34;</span><span class=p>,</span> <span class=s>&#34;g&#34;</span><span class=p>,</span> <span class=s>&#34;h&#34;</span><span class=p>,</span> <span class=s>&#34;i&#34;</span><span class=p>,</span> <span class=s>&#34;j&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=nx>result2</span> <span class=o>:=</span> <span class=nb>min</span><span class=p>(</span><span class=nx>vii</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>result2</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Set</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// Package sets implements sets of any comparable type.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>sets</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Set is a set of values.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>type</span> <span class=nx>Set</span><span class=p>[</span><span class=nx>T</span> <span class=nx>comparable</span><span class=p>]</span> <span class=kd>map</span><span class=p>[</span><span class=nx>T</span><span class=p>]</span><span class=kd>struct</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Make returns a set of some element type.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nx>Make</span><span class=p>[</span><span class=nx>T</span> <span class=nx>comparable</span><span class=p>]()</span> <span class=nx>Set</span><span class=p>[</span><span class=nx>T</span><span class=p>]</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nb>make</span><span class=p>(</span><span class=nx>Set</span><span class=p>[</span><span class=nx>T</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Add adds v to the set s.
</span></span></span><span class=line><span class=cl><span class=c1>// If v is already in s this has no effect.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>s</span> <span class=nx>Set</span><span class=p>[</span><span class=nx>T</span><span class=p>])</span> <span class=nf>Add</span><span class=p>(</span><span class=nx>v</span> <span class=nx>T</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>s</span><span class=p>[</span><span class=nx>v</span><span class=p>]</span> <span class=p>=</span> <span class=kd>struct</span><span class=p>{}{}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Delete removes v from the set s.
</span></span></span><span class=line><span class=cl><span class=c1>// If v is not in s this has no effect.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>s</span> <span class=nx>Set</span><span class=p>[</span><span class=nx>T</span><span class=p>])</span> <span class=nf>Delete</span><span class=p>(</span><span class=nx>v</span> <span class=nx>T</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nb>delete</span><span class=p>(</span><span class=nx>s</span><span class=p>,</span> <span class=nx>v</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Contains reports whether v is in s.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>s</span> <span class=nx>Set</span><span class=p>[</span><span class=nx>T</span><span class=p>])</span> <span class=nf>Contains</span><span class=p>(</span><span class=nx>v</span> <span class=nx>T</span><span class=p>)</span> <span class=kt>bool</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>_</span><span class=p>,</span> <span class=nx>ok</span> <span class=o>:=</span> <span class=nx>s</span><span class=p>[</span><span class=nx>v</span><span class=p>]</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nx>ok</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Len reports the number of elements in s.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>s</span> <span class=nx>Set</span><span class=p>[</span><span class=nx>T</span><span class=p>])</span> <span class=nf>Len</span><span class=p>()</span> <span class=kt>int</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nb>len</span><span class=p>(</span><span class=nx>s</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Iterate invokes f on each element of s.
</span></span></span><span class=line><span class=cl><span class=c1>// It&#39;s OK for f to call the Delete method.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>s</span> <span class=nx>Set</span><span class=p>[</span><span class=nx>T</span><span class=p>])</span> <span class=nf>Iterate</span><span class=p>(</span><span class=nx>f</span> <span class=kd>func</span><span class=p>(</span><span class=nx>T</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span> <span class=nx>v</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>s</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nf>f</span><span class=p>(</span><span class=nx>v</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=尝鲜试用>尝鲜试用<a hidden class=anchor aria-hidden=true href=#尝鲜试用>#</a></h3><ul><li><p>Go2Goplaygroud： <a href=https://go2goplay.golang.org/>The go2go Playground</a></p></li><li><p>Go 1.17 （非最新，不推荐）：</p><p><code>go run -gcflags=-G=3 myproject``/main``.go</code></p></li><li><p>go 1.18 （正式版已发布）</p><p><a href=https://go.dev/doc/go1.18>https://go.dev/doc/go1.18</a></p></li></ul><h2 id=golang-类型当前状况与泛型的意义>Golang 类型当前状况与泛型的意义<a hidden class=anchor aria-hidden=true href=#golang-类型当前状况与泛型的意义>#</a></h2><h3 id=当前>当前<a hidden class=anchor aria-hidden=true href=#当前>#</a></h3><h4 id=interface>interface<a hidden class=anchor aria-hidden=true href=#interface>#</a></h4><p>弊端：类型转换、缺乏编译时的约束</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>printStr</span><span class=p>(</span><span class=nx>x</span> <span class=kd>interface</span><span class=p>{})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>value</span><span class=p>,</span> <span class=nx>ok</span> <span class=o>:=</span> <span class=nx>x</span><span class=p>.(</span><span class=kt>string</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=p>!</span><span class=nx>ok</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;It&#39;s not ok for type string&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;The value is &#34;</span><span class=p>,</span> <span class=nx>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nf>printStr</span><span class=p>(</span><span class=mi>123</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c1>// It&#39;s not ok for type string
</span></span></span></code></pre></div><h4 id=为不同类型单独编写>为不同类型单独编写<a hidden class=anchor aria-hidden=true href=#为不同类型单独编写>#</a></h4><p>弊端：API与代码实现不整洁、工作量大等</p><p>示例：当前标准库的 sort, math 等</p><ul><li><a href=https://pkg.go.dev/sort>https://pkg.go.dev/sort</a></li><li><a href=https://pkg.go.dev/math>https://pkg.go.dev/math</a></li></ul><h4 id=代码生成>代码生成<a hidden class=anchor aria-hidden=true href=#代码生成>#</a></h4><p>弊端：需学习第三方代码生成工具、go:generate、AST等知识，不通用</p><p>示例：</p><p><a href=https://github.com/cheekybits/genny>https://github.com/cheekybits/genny</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>gogenerate</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;github.com/cheekybits/genny/generic&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//go:generate genny -in=$GOFILE -out=gen-$GOFILE gen &#34;KeyType=string,int ValueType=string,int&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>KeyType</span> <span class=nx>generic</span><span class=p>.</span><span class=nx>Type</span>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>ValueType</span> <span class=nx>generic</span><span class=p>.</span><span class=nx>Type</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>KeyTypeValueTypeMap</span> <span class=kd>map</span><span class=p>[</span><span class=nx>KeyType</span><span class=p>]</span><span class=nx>ValueType</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>NewKeyTypeValueTypeMap</span><span class=p>()</span> <span class=kd>map</span><span class=p>[</span><span class=nx>KeyType</span><span class=p>]</span><span class=nx>ValueType</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nb>make</span><span class=p>(</span><span class=kd>map</span><span class=p>[</span><span class=nx>KeyType</span><span class=p>]</span><span class=nx>ValueType</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=go-官方泛型意义>Go 官方泛型意义<a hidden class=anchor aria-hidden=true href=#go-官方泛型意义>#</a></h3><ul><li>通用操作与类型约束</li><li>函数式编程</li><li>简化标准库和第三方库的实现</li></ul><p>………</p><h2 id=golang-泛型发展历史>Golang 泛型发展历史<a hidden class=anchor aria-hidden=true href=#golang-泛型发展历史>#</a></h2><table><thead><tr><th style=text-align:left>简述</th><th style=text-align:left>时间</th><th style=text-align:left>作者</th></tr></thead><tbody><tr><td style=text-align:left>[Type Functions]</td><td style=text-align:left>2010 年</td><td style=text-align:left>Ian Lance Taylor</td></tr><tr><td style=text-align:left>Generalized Types</td><td style=text-align:left>2011 年</td><td style=text-align:left>Ian Lance Taylor</td></tr><tr><td style=text-align:left>Generalized Types v2</td><td style=text-align:left>2013 年</td><td style=text-align:left>Ian Lance Taylor</td></tr><tr><td style=text-align:left>Type Parameters</td><td style=text-align:left>2013 年</td><td style=text-align:left>Ian Lance Taylor</td></tr><tr><td style=text-align:left>go:generate</td><td style=text-align:left>2014 年</td><td style=text-align:left>Rob Pike</td></tr><tr><td style=text-align:left>First Class Types</td><td style=text-align:left>2015 年</td><td style=text-align:left>Bryan C.Mills</td></tr><tr><td style=text-align:left>Contracts</td><td style=text-align:left>2018 年</td><td style=text-align:left>Ian Lance Taylor, Robert Griesemer</td></tr><tr><td style=text-align:left><a href=https://go.googlesource.com/proposal/+/master/design/go2draft-contracts.md>Contracts</a></td><td style=text-align:left>2019 年</td><td style=text-align:left>Ian Lance Taylor, Robert Griesemer</td></tr><tr><td style=text-align:left>Redundancy in Contracts(2019)&rsquo;s Design</td><td style=text-align:left>2019 年</td><td style=text-align:left>Ian Lance Taylor, Robert Griesemer</td></tr><tr><td style=text-align:left><a href=https://go.googlesource.com/proposal/+/refs/heads/master/design/43651-type-parameters.md>Constrained Type Parameters</a></td><td style=text-align:left>2020 年</td><td style=text-align:left>Ian Lance Taylor, Robert Griesemer</td></tr><tr><td style=text-align:left><a href=https://arxiv.org/pdf/2005.11710.pdf>Featherweight Go</a></td><td style=text-align:left>2020年</td><td style=text-align:left>Ian Lance Taylor, Robert Griesemer</td></tr><tr><td style=text-align:left>合并进 master、发布 Go 1.18、改进标准库 等</td><td style=text-align:left>2021 - 2022 年</td><td style=text-align:left></td></tr></tbody></table><h2 id=golang-泛型实现原理>Golang 泛型实现原理<a hidden class=anchor aria-hidden=true href=#golang-泛型实现原理>#</a></h2><h3 id=他山之石>他山之石<a hidden class=anchor aria-hidden=true href=#他山之石>#</a></h3><h4 id=不同语言泛型实现>不同语言泛型实现<a hidden class=anchor aria-hidden=true href=#不同语言泛型实现>#</a></h4><p><a href=https://en.wikipedia.org/wiki/Object_type_(object-oriented_programming)#Boxing>boxing </a>(装箱) VS <a href=https://en.wikipedia.org/wiki/Monomorphization>monomorphization</a> (单态化)</p><p><a href=https://thume.ca/2019/07/14/a-tour-of-metaprogramming-models-for-generics/><img loading=lazy src=/static/flowchart-2x-16474487455315.png alt=img></a></p><h4 id=泛型的困境>泛型的困境<a hidden class=anchor aria-hidden=true href=#泛型的困境>#</a></h4><p><a href=https://research.swtch.com/generic>https://research.swtch.com/generic</a></p><ul><li>拖累程序员: 比如 C 语言，增加了程序员的负担，需要曲折的实现，但是不对增加语言的复杂性</li><li>拖累编译器: 比如 C++，增加了编译器的负担，可能会产生很多冗余的代码，重复的代码还需要编译器斟酌删除，编译的文件可能非常大</li><li>拖累执行时间: 比如 Java，将一些装箱成 Object, 进行类型擦除。虽然减少代码冗余、减少空间，但是需要装箱拆箱操作，代码效率低</li></ul><h3 id=go>Go<a hidden class=anchor aria-hidden=true href=#go>#</a></h3><p>Keith H. Randal 的三个方案：</p><p><a href=https://github.com/golang/proposal/blob/master/design/generics-implementation-dictionaries.md>Generics implementation - Dictionaries</a></p><p>编译时实例化字典，字典包含为类型参数实例化的类型信息</p><p><a href=https://github.com/golang/proposal/blob/master/design/generics-implementation-stenciling.md>Generics implementation - Stenciling</a></p><p>模板生成，为每个实例化类型生成一套独立的代码</p><p><a href=https://github.com/golang/proposal/blob/master/design/generics-implementation-gcshape.md>Generics implementation - GC Shape Stenciling</a></p><p>混合实现，shape类型相同的类型，使用字典区分类型的不同行为，</p><p>类型的shape是指它对内存分配器/垃圾回收器呈现的方式，</p><p>包括大小、所需的对齐方式以及类型的哪些部分包含指针</p><h2 id=参考资料>参考资料<a hidden class=anchor aria-hidden=true href=#参考资料>#</a></h2><p>Go 官方和社区资料：</p><p><a href=https://go.dev/doc/go1.18>https://go.dev/doc/go1.18</a></p><p><a href=https://go.dev/doc/tutorial/generics>https://go.dev/doc/tutorial/generics</a></p><p><strong><a href=https://go.googlesource.com/proposal/+/refs/heads/master/design/43651-type-parameters.md>https://go.googlesource.com/proposal/+/refs/heads/master/design/43651-type-parameters.md</a></strong></p><p><a href=https://go.dev/blog/generics-proposal>https://go.dev/blog/generics-proposal</a></p><p><a href=https://go.dev/blog/generics-next-step>https://go.dev/blog/generics-next-step</a></p><p><a href=https://go.dev/blog/go2draft>https://go.dev/blog/go2draft</a></p><p><a href=https://go.dev/blog/why-generics>https://go.dev/blog/why-generics</a></p><p><a href=https://github.com/golang/proposal/blob/master/design/generics-implementation-dictionaries.md>https://github.com/golang/proposal/blob/master/design/generics-implementation-dictionaries.md</a></p><p><a href=https://github.com/golang/proposal/blob/master/design/generics-implementation-stenciling.md>https://github.com/golang/proposal/blob/master/design/generics-implementation-stenciling.md</a></p><p><a href=https://github.com/golang/proposal/blob/master/design/generics-implementation-gcshape.md>https://github.com/golang/proposal/blob/master/design/generics-implementation-gcshape.md</a></p><p>示例用法、文章分析等：</p><p><a href=https://github.com/mattn/go-generics-example>https://github.com/mattn/go-generics-example</a></p><p><a href=https://colobu.com/2021/08/30/how-is-go-generic-implemented/>https://colobu.com/2021/08/30/how-is-go-generic-implemented/</a></p><p><a href=https://coolshell.cn/articles/21615.html>https://coolshell.cn/articles/21615.html</a></p><p><a href=https://draveness.me/whys-the-design-go-generics/>https://draveness.me/whys-the-design-go-generics/</a></p><p><a href=https://taoshu.in/go/go-generics-design.html>https://taoshu.in/go/go-generics-design.html</a></p><p><a href=https://research.swtch.com/generic>https://research.swtch.com/generic</a></p><p><a href=https://thume.ca/2019/07/14/a-tour-of-metaprogramming-models-for-generics/>https://thume.ca/2019/07/14/a-tour-of-metaprogramming-models-for-generics/</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://zhoukuncheng.github.io/tags/golang/>Golang</a></li><li><a href=https://zhoukuncheng.github.io/tags/generics/>Generics</a></li><li><a href=https://zhoukuncheng.github.io/tags/go-1.18/>Go 1.18</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://zhoukuncheng.github.io/>zhoukuncheng's Personal Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>